---
title: 'AWSセキュリティの基本を押さえる！IAMを理解する'
date: '2023-04-08'
tags:
  - aws
  - cloud
summary: "これまで業務でさんざんAWSを使ってきたのですが、基本的には用意してもらった環境を使ってきただけでした。せめてAWSのセキュリティの基本くらいはちゃんと押さえておきたいので改めてきちんと理解しておきたいと思います。今回はIAMユーザを作成してIAMロールを割り当てる方法などを調べます。"

thumbnail: aws
featureImage: "./top.jpg"

draft: true
---

### ルートアカウントにMFAを設定する

まず最初にやるべきことはAWSのルートアカウントにはMFA(マルチファクタ認証)を設定することです。MFAはパスワードだけではなく、追加の認証要素（例えば携帯電話に送られたワンタイムパスワードなど）を必要とする認証方法です。これにより、もしパスワードが盗まれたとしても攻撃者がアカウントにアクセスするのを難しくします。

次の手順でMFAを設定します。

- AWSのルートアカウントで[AWSマネジメントコンソール](https://aws.amazon.com/jp/console/)にログインします
- 画面右上のアカウント名の部分をクリックしてメニューを表示し、「セキュリティ認証情報」をクリックします

{{< i prefix="1" method="resize" height=480 >}}

- 「セキュリティ認証情報(ルートユーザ)」画面の「MFAを割り当てる」ボタンをクリックします

{{< i prefix="2" method="resize" width=720 >}}

「MFAデバイスを選択」画面にて必要な情報を入力します
- 「デバイス名」に任意の名前を設定します。ここではgoogle-authenticatorと設定しました
- 「MFAデバイス」に「認証アプリケーション」を選択します
- 「次へ」をクリックします

{{< i prefix="3" method="resize" height=480 >}}

デバイスの設定画面が開きます

{{< i prefix="4" method="resize" width=720 >}}

表示されたQRコードを読み取るための認証アプリケーションをインストールします
- ここではChrome拡張機能の「Authenticator」を使用します

{{< i prefix="5" method="resize" width=720 >}}

↑をインストールします

Authenticatorを使用して先ほどのQRコードを読み取ります
- アドレスバーの右にあるQRコードのアイコンをクリックします
- 表示されたウィンドウ内の赤枠で囲ったボタンをクリックします
- 範囲選択するモードになるのでQRコードを選択し読み取ります

{{< i prefix="6" method="resize" height=480 >}}

QRコードの読み取りに成功すると次のダイアログが表示されます

{{< i prefix="7" method="resize" width=720 >}}

Authenticatorを使用して先ほどのデバイスの設定画面に二つのMFAコードを入力します。
- MFAコードを入力してから「MFAを追加」ボタンをクリックします

{{< i prefix="8" method="resize" width=720 >}}

多要素認証(MFA)一覧に新しいデバイスが追加されていればOKです

{{< i prefix="9" method="resize" width=1280 >}}
