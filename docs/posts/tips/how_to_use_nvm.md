# nvmでnodeのバージョンを管理する

nvmを使って使用するnodeのバージョンを切り替える方法のメモです。nodeはバージョンを変えただけで(特に新しすぎるバージョンにすると)それまで動いていたものが簡単に動かなくなるのでプロジェクトごとにバージョンを固定することが重要です。nvmを使うことで使用するnodeのバージョンの切り替えを簡単に行うことができます。

ちなみにWindows環境を想定しています。MacやLinuxではasdfを使ったほうが簡単です。asdfでは異なるソフトウェア(nodeとかpythonとか)のバージョンを同じ方法で統一的に管理できるためasdfが使える場合はasdfを使いましょう(nvmを使う場合はnvm独自の使い方を覚える必要があるためやや面倒です)。


## nvmをインストールする

nvmのインストールはWindows用のインストーラーを使うかパッケージマネージャを使ってインストールすることもできます。筆者はscoopを使っています。scoopはwindows用のasdfみたいなものですがwindows用の類似のパッケージマネージャにはchoco、scoop、wingetなど複数あって何をつかうべきかよくわからなくなります。ちなみにwingetはMicrosoft社が管理しているようなので公式？っぽい感じがしますがインストールできるパッケージが少ない模様。

scoopを使ってインストールする場合は次のコマンドを実行します(scoop自体のインストールは割愛。そのうち書くかも)

```
> scoop install nvm
```

現在インストールされているパッケージを表示するには次のコマンドを実行します。

```
> scoop list

Name         Version          Source Updated             Info
----         -------          ------ -------             ----
7zip         22.01            main   2023-01-01 15:29:23
elm          0.19.1           main   2023-01-01 15:29:47
ghq          1.3.0            main   2022-09-25 17:16:18
git          2.39.0.windows.2 main   2023-01-01 15:29:34
go           1.19.4           main   2023-01-01 15:30:26
make         4.3              main   2022-09-25 19:25:51
nvm          1.1.10           main   2023-01-01 15:28:39
scoop-viewer 0.10.0           viewer 2023-01-01 15:20:23
```

nvmが表示されていれば成功です。

## nodeをインストールする

インストールするnodeのバージョンをリストアップします。

```
> nvm list available

|   CURRENT    |     LTS      |  OLD STABLE  | OLD UNSTABLE |
|--------------|--------------|--------------|--------------|
|    19.4.0    |   18.13.0    |   0.12.18    |   0.11.16    |
|    19.3.0    |   18.12.1    |   0.12.17    |   0.11.15    |
|    19.2.0    |   18.12.0    |   0.12.16    |   0.11.14    |
...以下略
```

インストールしたいバージョンを指定してインストールします

```
> nvm install 16.19.0
```

使用したいバージョンを切り替えるには以下のコマンドを使います。

```
> nvm use 16.19.0
```

インストールされているnodeの実行ファイルは次の場所にあります。
```
> gcm node

CommandType     Name         Version    Source
-----------     ----         -------    ------
Application     node.exe     16.19.0.0  C:\Users\<user_name>\scoop\apps\nvm\current\nodejs\nodejs\node.exe
```
